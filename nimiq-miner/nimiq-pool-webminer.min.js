/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /gh/Albermonte/nimiq-pool-webminer@1.0.11/nimiq-pool-webminer.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
let run=(e,n,o,s)=>{(async()=>{let i={shares:0,init:()=>{Nimiq.init(async()=>{if("undefined"==typeof $){let e={};window.$=e}try{Nimiq.GenesisConfig.main()}catch(e){console.log(`Error: ${e}`)}console.log("Nimiq loaded. Connecting and establishing consensus."),$.consensus=await Nimiq.Consensus.nano(),$.blockchain=$.consensus.blockchain,$.accounts=$.blockchain.accounts,$.mempool=$.consensus.mempool,$.network=$.consensus.network,$.consensus.on("established",()=>i._onConsensusEstablished()),$.consensus.on("lost",()=>console.error("Consensus lost")),$.blockchain.on("head-changed",()=>i._onHeadChanged()),$.network.on("peers-changed",()=>i._onPeersChanged()),$.network.connect()},e=>{switch(e){case Nimiq.ERR_WAIT:alert("Error: Already open in another tab or window.");break;case Nimiq.ERR_UNSUPPORTED:alert("Error: Browser not supported");break;default:alert("Error: Nimiq initialization error")}})},_onConsensusEstablished:()=>{console.log("Consensus established."),i.startMining()},_onHashrateChanged:e=>{console.log(`${e} H/s`),document.getElementById("hs").innerHTML=e},_onHeadChanged:()=>{i.shares=0},_onPeersChanged:()=>console.log(`Now connected to ${$.network.peerCount} peers.`),_onPoolConnectionChanged:e=>{e===Nimiq.BasePoolMiner.ConnectionState.CONNECTING&&console.log("Connecting to the pool"),e===Nimiq.BasePoolMiner.ConnectionState.CONNECTED&&(console.log("Connected to pool"),$.miner.startWork()),e===Nimiq.BasePoolMiner.ConnectionState.CLOSED&&console.log("Connection closed")},_onShareFound:()=>{i.shares++,console.log(`Found ${i.shares} shares for block ${$.blockchain.height}`)},startMining:()=>{console.log("Start mining..."),i.address=Nimiq.Address.fromUserFriendlyAddress(o),$.miner=new Nimiq.NanoPoolMiner($.blockchain,$.network.time,i.address,Nimiq.BasePoolMiner.generateDeviceId($.network.config)),$.miner.threads=s,console.log(`Using ${$.miner.threads} threads.`),$.miner.connect(e,n),$.miner.on("connection-state",i._onPoolConnectionChanged),$.miner.on("share",i._onShareFound),$.miner.on("hashrate-changed",i._onHashrateChanged)}};"undefined"==typeof Nimiq&&await function(e){return new Promise((n,o)=>{let s=document.createElement("script");s.readyState?s.onreadystatechange=(()=>{"loaded"!==s.readyState&&"complete"!==s.readyState||(s.onreadystatechange=null,n())}):s.onload=(()=>{n()}),s.src=e,document.getElementsByTagName("head")[0].appendChild(s)})}("https://unpkg.com/@nimiq/core-web@1.4.3/nimiq.js"),console.log("Completed downloading Nimiq client from CDN."),i.init()})()},PoolMiner={init:(e,n,o,s)=>run(e,n,o,s)};
//# sourceMappingURL=/sm/f20c99a1d751d8bfc04967cefded4553b8ad9e5354ace62d28cde41f1ad852e5.map